<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title></title>
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,300italic,400italic,700italic|Source+Code+Pro:300,400,700' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="../assets/css/bootstrap.css">
<link rel="stylesheet" href="../assets/css/jquery.bonsai.css">
<link rel="stylesheet" href="../assets/css/main.css">
<link rel="stylesheet" href="../assets/icon-font/icons.css">
<script type="text/javascript" src="../assets/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript" src="../assets/js/bootstrap.js"></script>
<script type="text/javascript" src="../assets/js/jquery.bonsai.js"></script>
<script type="text/javascript" src="../assets/js/imageMapResizer.min.js"></script>

  </head>
  <body>
    <div>

      <!-- Name Title -->

      <h1>(unnamed)</h1>

      <!-- Type and Stereotype -->

      <section style="margin-top: .5em;">
        <span class="alert alert-info">
          <span class="node-icon staruml-icon icon-UMLRegion"></span>
          UMLRegion
        </span>

      </section>

      <!-- Path -->

      <section style="margin-top: 10px">




          <span class="label label-info"><a href='cf9c8b720f3815adeccaf3ef6e48c6c4.html'><span class='node-icon staruml-icon icon-Project'></span>Untitled</a></span>

          <span>::</span>
          <span class="label label-info"><a href='7f0c2f4e32e39a5371a6408cbe9ae875.html'><span class='node-icon staruml-icon icon-UMLStateMachine'></span>Statemachine by Mermaid</a></span>

          <span>::</span>
          <span class="label label-info"><a href='5a9bd78ca0efa089e3456c5560855c10.html'><span class='node-icon staruml-icon icon-UMLRegion'></span>(Region)</a></span>

      </section>

      <!-- Diagram -->



      <!-- Description -->


      <section>
        <h3>Description</h3>
        <div>

            <span class="label label-info">none</span>

        </div>
      </section>


      <!-- Specification -->



      <!-- Directed Relationship -->



      <!-- Undirected Relationship -->



      <!-- Classifier -->



      <!-- Interface -->



      <!-- Component -->



      <!-- Node -->



      <!-- Actor -->



      <!-- Use Case -->



      <!-- Template Parameters -->



      <!-- Literals -->



      <!-- Attributes -->



      <!-- Operations -->



      <!-- Receptions -->



      <!-- Extension Points -->



      <!-- Parameters -->



      <!-- Diagrams -->




      <!-- Behavior -->



      <!-- Action -->



      <!-- Interaction -->



      <!-- CombinedFragment -->



      <!-- Activity -->



      <!-- State Machine -->



      <!-- State Machine -->




<section class="element-list">
    <h3>Vertices</h3>
    <ul class="nav nav-list">

        <li><a href='2672e81159b955eb7d31d84a23e2f76c.html'><span class='node-icon staruml-icon icon-UMLInitialState'></span>root_start</a></li>

        <li><a href='b269c4e202df6c9c1229a12c7d5fa803.html'><span class='node-icon staruml-icon icon-UMLState'></span>用户空闲</a></li>

        <li><a href='8e929372af770439984d9a9df465e770.html'><span class='node-icon staruml-icon icon-UMLState'></span>用户绑定</a></li>

        <li><a href='edd3c18f3a9fda932c35dd0f337f6b0d.html'><span class='node-icon staruml-icon icon-UMLState'></span>RSO认证</a></li>

        <li><a href='27279b03a15559396b5ff1805b6c48b3.html'><span class='node-icon staruml-icon icon-UMLState'></span>已绑定用户</a></li>

        <li><a href='4ebcf63125aa1fd41c9f6e94021e24c1.html'><span class='node-icon staruml-icon icon-UMLState'></span>命令接收</a></li>

        <li><a href='867c7e0d4e89b28678623a2bba0e02ce.html'><span class='node-icon staruml-icon icon-UMLInitialState'></span>命令接收_start</a></li>

        <li><a href='cdcd62bd936996963b2fba92a07eece2.html'><span class='node-icon staruml-icon icon-UMLState'></span>延迟回复</a></li>

        <li><a href='3cefdbbe684a25302cf88466f6c3bd1e.html'><span class='node-icon staruml-icon icon-UMLState'></span>任务入队</a></li>

        <li><a href='20384e274f44526bc53c761c488304b4.html'><span class='node-icon staruml-icon icon-UMLFinalState'></span>命令接收_end</a></li>

        <li><a href='a4554c75ff2f5348eea30de80a8e9438.html'><span class='node-icon staruml-icon icon-UMLState'></span>异步处理</a></li>

        <li><a href='2c2a72f38c9f3faecf1bcef5298533ec.html'><span class='node-icon staruml-icon icon-UMLInitialState'></span>异步处理_start</a></li>

        <li><a href='7fa6bdc919bb71aa8adae52b1c6d3571.html'><span class='node-icon staruml-icon icon-UMLState'></span>获取Timeline</a></li>

        <li><a href='1656c31949f0f12bee4ea8795cd1a1de.html'><span class='node-icon staruml-icon icon-UMLState'></span>速率限制检查</a></li>

        <li><a href='5aa2a3bec3a7731a881fbdf2131b4655.html'><span class='node-icon staruml-icon icon-UMLState'></span>数据解析</a></li>

        <li><a href='835a9c5e57ee0ec95533cfa9b90ac359.html'><span class='node-icon staruml-icon icon-UMLState'></span>LLM分析</a></li>

        <li><a href='8d74f696f914855a06b399504c407cf8.html'><span class='node-icon staruml-icon icon-UMLState'></span>情绪标记</a></li>

        <li><a href='81ab3c6dd84140248f355bdf7cdd218c.html'><span class='node-icon staruml-icon icon-UMLState'></span>TTS合成</a></li>

        <li><a href='cd27dbabe5f9d82af448e50a272a5b03.html'><span class='node-icon staruml-icon icon-UMLState'></span>结果就绪</a></li>

        <li><a href='618569ea3f171e2012ba2c358d95e53a.html'><span class='node-icon staruml-icon icon-UMLFinalState'></span>异步处理_end</a></li>

        <li><a href='a9bc57e787f83bcca83f2bfa807425f7.html'><span class='node-icon staruml-icon icon-UMLState'></span>响应交付</a></li>

        <li><a href='a14a60f418b2e5835e0cb9663bc59322.html'><span class='node-icon staruml-icon icon-UMLInitialState'></span>响应交付_start</a></li>

        <li><a href='78cbe1e664c02f21c1ad8cb8218ef724.html'><span class='node-icon staruml-icon icon-UMLState'></span>更新Webhook</a></li>

        <li><a href='b13f2da07c5113b3f168aa0347319342.html'><span class='node-icon staruml-icon icon-UMLState'></span>发送嵌入消息</a></li>

        <li><a href='0245cef2a7cf48df288a65fdc66db74f.html'><span class='node-icon staruml-icon icon-UMLState'></span>加入语音</a></li>

        <li><a href='69745ea16081e163a3da36fdb363b232.html'><span class='node-icon staruml-icon icon-UMLState'></span>播放TTS</a></li>

        <li><a href='66ff3f8b2c3ccb1f433233079fba74ef.html'><span class='node-icon staruml-icon icon-UMLFinalState'></span>响应交付_end</a></li>

        <li><a href='9ba27ae4c62f999a342dd99a87a305d2.html'><span class='node-icon staruml-icon icon-UMLState'></span>监控循环</a></li>

        <li><a href='4c572fd58e97a9bd277d125ac7744a7f.html'><span class='node-icon staruml-icon icon-UMLInitialState'></span>监控循环_start</a></li>

        <li><a href='564f0f7e7804327044c319a697422b92.html'><span class='node-icon staruml-icon icon-UMLState'></span>检查Redis</a></li>

        <li><a href='226ed00069c00a0ce46d6a4fdd8d6d6e.html'><span class='node-icon staruml-icon icon-UMLState'></span>检查数据库</a></li>

        <li><a href='23a40f8e2043d0c91ad9ee721b524f77.html'><span class='node-icon staruml-icon icon-UMLState'></span>检查指标</a></li>

        <li><a href='ccf18f3ab3722c2d15e2a3b3e64a82d0.html'><span class='node-icon staruml-icon icon-UMLFinalState'></span>root_end</a></li>

    </ul>
</section>





<section class="element-list">
    <h3>Transitions</h3>
    <ul class="nav nav-list">

        <li><a href='11e8ed79af5f61d03d20e9a9b864d89b.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>机器人在线 (root_start→用户空闲)</a></li>

        <li><a href='5259cb2b1e61503c0cc0606c675b01d4.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>/bind 命令 (用户空闲→用户绑定)</a></li>

        <li><a href='d1a772caebf5ed0cfab316eebb823244.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>重定向到Riot OAuth (用户绑定→RSO认证)</a></li>

        <li><a href='1ecf5464282ad065143c6716e252218a.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>授权码 (RSO认证→用户绑定)</a></li>

        <li><a href='894cba5af5d3e8e21f1fbfa1355164d6.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>获取并存储PUUID (用户绑定→已绑定用户)</a></li>

        <li><a href='798de3926e9118934dc423447417ae95.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>绑定完成 (已绑定用户→用户空闲)</a></li>

        <li><a href='48b1768fc5011fc3d1d460dd257cb6fa.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>/讲道理 命令 (用户空闲→命令接收)</a></li>

        <li><a href='16b9f3cd7a7b3607a500aa0993bed590.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>(命令接收_start→延迟回复)</a></li>

        <li><a href='e5b89ddbbe6f7c2cba4216fbd4d9754d.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>发送到Redis队列 (延迟回复→任务入队)</a></li>

        <li><a href='69354403ae1d656a6db592e1cd16839e.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>(任务入队→命令接收_end)</a></li>

        <li><a href='1fee3e654fb8e28635935749a58c90ca.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>Worker接收任务 (命令接收→异步处理)</a></li>

        <li><a href='c28228da010b551fcac53406fb222a06.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>(异步处理_start→获取Timeline)</a></li>

        <li><a href='7b94291be2cc4553f0d619bf9a3a9c9e.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>调用Riot API (获取Timeline→速率限制检查)</a></li>

        <li><a href='4cd594e42101c8e058260a4f793151f2.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>429 - 等待并重试 (速率限制检查→获取Timeline)</a></li>

        <li><a href='04def6b17182c0cc4099b223ca0eee61.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>200 OK (速率限制检查→数据解析)</a></li>

        <li><a href='3ea2034a30612846c13a57a7d35fb582.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>解析为Pydantic模型 (数据解析→LLM分析)</a></li>

        <li><a href='d5da1fbc5958b9378660a8039412647e.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>Gemini分析 (LLM分析→情绪标记)</a></li>

        <li><a href='ec1aa3db52fe18ef683f8ee92b967bce.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>添加情绪标签 (情绪标记→TTS合成)</a></li>

        <li><a href='85fc9e0044c3d0ffeaa14c8d26017be4.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>生成音频 (TTS合成→结果就绪)</a></li>

        <li><a href='27ac678cd0a183afd23098a5b2c3f8d1.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>(结果就绪→异步处理_end)</a></li>

        <li><a href='1ea3bf850a8061be8b07c949245970c5.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>Worker完成 (异步处理→响应交付)</a></li>

        <li><a href='14c967cbaca460323e7e7b47b0ed41e7.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>(响应交付_start→更新Webhook)</a></li>

        <li><a href='85c658f51f94abbc7f609d3914c14e0b.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>更新原始消息 (更新Webhook→发送嵌入消息)</a></li>

        <li><a href='972c781d1d0d2a2a51600b61724c0f7e.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>发送分析结果 (发送嵌入消息→加入语音)</a></li>

        <li><a href='8d4d6941162a7fc810fd545a29a96078.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>连接语音频道 (加入语音→播放TTS)</a></li>

        <li><a href='920110825a0a168b814cf15fe408c173.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>音频播放 (播放TTS→响应交付_end)</a></li>

        <li><a href='94682251afd603e5aa7f3811e668b696.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>命令完成 (响应交付→用户空闲)</a></li>

        <li><a href='7c434760a77e366caef3f225f81070e3.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>(监控循环_start→检查Redis)</a></li>

        <li><a href='a1c7f85b5e250fdc47a11a4fed813bfc.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>监控队列深度 (检查Redis→检查数据库)</a></li>

        <li><a href='f65eec767a0b35f9db99aa3a3cd63d3e.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>验证数据一致性 (检查数据库→检查指标)</a></li>

        <li><a href='79f9fa1d678ad95f05852327ce2898cd.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>追踪性能 (检查指标→检查Redis)</a></li>

        <li><a href='b64618278f10566d7c4ace09bc417634.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>CLI3观察者 (用户空闲→监控循环)</a></li>

        <li><a href='674375670eea8f916d2b16d79b1345c7.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>持续进行 (监控循环→用户空闲)</a></li>

        <li><a href='113be98a5a65c986b85c4d7ba4e7f8fe.html'><span class='node-icon staruml-icon icon-UMLTransition'></span>机器人关闭 (用户空闲→root_end)</a></li>

    </ul>
</section>




      <!-- State -->



      <!-- Vertex -->



      <!-- Transition -->



      <!-- Data Model (ERD) -->



      <!-- Columns (ERD) -->



      <!-- Related Entities (ERD) -->



      <!-- Data Flows (DFD) -->



      <!-- Flows (Flowchart) -->



      <!-- Properties -->

      <section>
        <h3>Properties</h3>

        <table class="table table-striped table-bordered">
    <tr>
        <th width="50%">Name</th>
        <th width="50%">Value</th>
    </tr>







    <tr>
        <td>name</td>
        <td></td>
    </tr>











    <tr>
        <td>stereotype</td>
        <td><span class='label label-info'>null</span></td>
    </tr>





    <tr>
        <td>visibility</td>
        <td>public</td>
    </tr>









</table>

      </section>

      <!-- Tags -->



      <!-- Constraints, Dependencies, Dependants -->















      <!-- Relationships -->





      <!-- Owned Elements -->





      <!-- Diagrams -->






      <!-- Image Map Resizer (https://github.com/davidjbradshaw/image-map-resizer) -->
      <script>
      imageMapResize();
      </script>
    </div>
  </body>
</html>
